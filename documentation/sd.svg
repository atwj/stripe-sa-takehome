<svg width="1593.08033" height="1104.89535" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">

<!-- Generator: Sequence Diagram - v1.8.11-(198) - http://www.macsequencediagram.com -->

<rect x="0.0" y="0.0" width="1593.08033" height="1104.89535" style="fill:#ECECEC;fill-opacity:1.0;"/>
<g id="Diagram Title" class="TitleView">
	<text x="796.5" y="35.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica Neue" font-size="17.0" font-weight="300" style="fill:#000000;fill-opacity:1.0;">Stripe Press</text>
</g>
<g id="Participant" class="ParticipantView">
	<rect x="60.0" y="135.0" width="141.5" height="61.0" rx="5.0" ry="5.0" style="fill:#D8D8D8;stroke:#979797;stroke-width:1.0;"/>
	<text x="130.75" y="165.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica Neue" font-size="14.0" font-weight="300" style="fill:#000000;fill-opacity:1.0;">Customer</text>
</g>
<g id="Participant" class="ParticipantView">
	<rect x="462.0" y="135.0" width="116.0" height="61.0" rx="5.0" ry="5.0" style="fill:#D8D8D8;stroke:#979797;stroke-width:1.0;"/>
	<text x="520.0" y="165.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica Neue" font-size="14.0" font-weight="300" style="fill:#000000;fill-opacity:1.0;">Client</text>
</g>
<g id="Participant" class="ParticipantView">
	<rect x="980.5" y="135.0" width="136.0" height="61.0" rx="5.0" ry="5.0" style="fill:#D8D8D8;stroke:#979797;stroke-width:1.0;"/>
	<text x="1048.5" y="165.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica Neue" font-size="14.0" font-weight="300" style="fill:#000000;fill-opacity:1.0;">Backend</text>
</g>
<g id="Participant" class="ParticipantView">
	<rect x="1415.5" y="135.0" width="117.5" height="61.0" rx="5.0" ry="5.0" style="fill:#D8D8D8;stroke:#979797;stroke-width:1.0;"/>
	<text x="1474.25" y="165.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica Neue" font-size="14.0" font-weight="300" style="fill:#000000;fill-opacity:1.0;">Stripe</text>
</g>
<g id="Lifeline" class="LifelineView">
	<line x1="130.0" y1="196.0" x2="132.0" y2="984.0" style="fill:none;stroke:#636363;stroke-opacity:1.0;stroke-width:1.0;" stroke-dasharray="20.0, 10.0"/>
</g>
<g id="Lifeline" class="LifelineView">
	<line x1="519.0" y1="196.0" x2="521.0" y2="984.0" style="fill:none;stroke:#636363;stroke-opacity:1.0;stroke-width:1.0;" stroke-dasharray="20.0, 10.0"/>
</g>
<g id="Lifeline" class="LifelineView">
	<line x1="1047.5" y1="196.0" x2="1049.5" y2="984.0" style="fill:none;stroke:#636363;stroke-opacity:1.0;stroke-width:1.0;" stroke-dasharray="20.0, 10.0"/>
</g>
<g id="Lifeline" class="LifelineView">
	<line x1="1473.5" y1="196.0" x2="1475.5" y2="984.0" style="fill:none;stroke:#636363;stroke-opacity:1.0;stroke-width:1.0;" stroke-dasharray="20.0, 10.0"/>
</g>
<g id="Lifeline Activation" class="LifelineActivationBoxView">
	<rect x="512.0" y="319.0" width="16.0" height="186.0" style="fill:#FFFFFF;fill-opacity:1.0;stroke:#636363;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Lifeline Activation" class="LifelineActivationBoxView">
	<rect x="1040.5" y="339.0" width="16.0" height="166.0" style="fill:#FFFFFF;fill-opacity:1.0;stroke:#636363;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Lifeline Activation" class="LifelineActivationBoxView">
	<rect x="1466.5" y="407.0" width="16.0" height="53.0" style="fill:#FFFFFF;fill-opacity:1.0;stroke:#636363;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Lifeline Activation" class="LifelineActivationBoxView">
	<rect x="512.0" y="542.0" width="16.0" height="321.0" style="fill:#FFFFFF;fill-opacity:1.0;stroke:#636363;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Lifeline Activation" class="LifelineActivationBoxView">
	<rect x="1466.5" y="587.0" width="16.0" height="96.0" style="fill:#FFFFFF;fill-opacity:1.0;stroke:#636363;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Lifeline Activation" class="LifelineActivationBoxView">
	<rect x="1040.5" y="720.0" width="16.0" height="143.0" style="fill:#FFFFFF;fill-opacity:1.0;stroke:#636363;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Lifeline Activation" class="LifelineActivationBoxView">
	<rect x="1466.5" y="765.0" width="16.0" height="53.0" style="fill:#FFFFFF;fill-opacity:1.0;stroke:#636363;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Signal" class="SignalMessageView">
	<text x="325.5" y="258.0" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica" font-size="13.0" font-weight="400" style="fill:#000000;fill-opacity:1.0;">[1] Customer clicks on a book to purchase.</text>
</g>
<g id="Signal" class="SignalMessageView">
	<text x="788.25" y="306.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica" font-size="13.0" font-weight="400" style="fill:#000000;fill-opacity:1.0;">[2] GET /checkout?item=&lt;book id&gt;</text>
</g>
<g id="Signal" class="SignalMessageView">
	<text x="1036.5" y="351.5" text-anchor="end" alignment-baseline="middle" font-family="Helvetica" font-size="13.0" font-weight="400" style="fill:#000000;fill-opacity:1.0;">[3] Retrieve book by book id</text>
</g>
<g id="Signal" class="SignalMessageView">
	<text x="1265.5" y="394.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica" font-size="13.0" font-weight="400" style="fill:#000000;fill-opacity:1.0;">[4] Create PaymentIntent with book.amount and default currency</text>
</g>
<g id="Signal" class="SignalMessageView">
	<text x="1265.5" y="439.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica" font-size="13.0" font-weight="400" style="fill:#000000;fill-opacity:1.0;">[5] Return PaymentIntent</text>
</g>
<g id="Signal" class="SignalMessageView">
	<text x="788.25" y="484.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica" font-size="13.0" font-weight="400" style="fill:#000000;fill-opacity:1.0;">[6] Return checkout.html page with embedded client secret from PaymentIntent.</text>
</g>
<g id="Signal" class="SignalMessageView">
	<text x="321.5" y="529.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica" font-size="13.0" font-weight="400" style="fill:#000000;fill-opacity:1.0;">[7] Customer provides card details and confirms payment</text>
</g>
<g id="Signal" class="SignalMessageView">
	<text x="1001.25" y="574.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica" font-size="13.0" font-weight="400" style="fill:#000000;fill-opacity:1.0;">[8] Payment Confirmed at Stripe</text>
</g>
<g id="Signal" class="SignalMessageView">
	<text x="1462.5" y="619.5" text-anchor="end" alignment-baseline="middle" font-family="Helvetica" font-size="13.0" font-weight="400" style="fill:#000000;fill-opacity:1.0;">[9] Process payment</text>
</g>
<g id="Signal" class="SignalMessageView">
	<text x="1001.25" y="662.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica" font-size="13.0" font-weight="400" style="fill:#000000;fill-opacity:1.0;">[10] return Payment Successful</text>
</g>
<g id="Signal" class="SignalMessageView">
	<text x="788.25" y="707.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica" font-size="13.0" font-weight="400" style="fill:#000000;fill-opacity:1.0;">[11] GET /success.html?pid=&lt;Payment Intent ID&gt;</text>
</g>
<g id="Signal" class="SignalMessageView">
	<text x="1265.5" y="752.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica" font-size="13.0" font-weight="400" style="fill:#000000;fill-opacity:1.0;">[12] Retrieve PaymentIntent with Payment Intent ID</text>
</g>
<g id="Signal" class="SignalMessageView">
	<text x="1265.5" y="797.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica" font-size="13.0" font-weight="400" style="fill:#000000;fill-opacity:1.0;">[13] Return PaymentIntent</text>
</g>
<g id="Signal" class="SignalMessageView">
	<text x="788.25" y="842.5" text-anchor="middle" alignment-baseline="middle" font-family="Helvetica" font-size="13.0" font-weight="400" style="fill:#000000;fill-opacity:1.0;">[14] Return success page with charge ID and amount charged from PaymentIntent</text>
</g>
<g id="Signal line" class="SignalLineView">
	<path d="M 510.0,273.0 L 520.0,278.5 L 510.0,283.0 L 510.0, 273.0" style="fill:#000000;fill-opacity:1.0;"/>
	
	<line x1="131.0" y1="278.5" x2="510.0" y2="278.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Signal line" class="SignalLineView">
	<path d="M 1038.5,318.0 L 1048.5,323.5 L 1038.5,328.0 L 1038.5, 318.0" style="fill:#000000;fill-opacity:1.0;"/>
	
	<line x1="528.0" y1="323.5" x2="1038.5" y2="323.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Signal line" class="SignalLineView">
	<path d="M 1066.5,361.0 L 1056.0,365.5 L 1066.5,371.0 L 1066.5,361.0" style="fill:#000000;fill-opacity:1.0;"/>
	<line x1="1057.0" y1="343.5" x2="1096.0" y2="343.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;"/>
	<line x1="1096.0" y1="365.5" x2="1066.5" y2="365.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;"/>
	<path d="M 1096.0,343.5 Q 1106.0,343.5 1106.0, 353.5 L 1106.0 355.5 Q 1106.0,365.5 1096.0,365.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Signal line" class="SignalLineView">
	<path d="M 1456.5,406.0 L 1466.5,411.5 L 1456.5,416.0 L 1456.5, 406.0" style="fill:#000000;fill-opacity:1.0;"/>
	
	<line x1="1056.5" y1="411.5" x2="1456.5" y2="411.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Signal line" class="SignalLineView">
	<path d="M 1066.5,451.0 L 1056.5,456.5 L 1066.5,461.0 L 1066.5, 451.0" style="fill:#000000;fill-opacity:1.0;"/>
	
	<line x1="1066.5" y1="456.5" x2="1466.5" y2="456.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;" stroke-dasharray="5.0, 3.0"/>
</g>
<g id="Signal line" class="SignalLineView">
	<path d="M 538.0,496.0 L 528.0,501.5 L 538.0,506.0 L 538.0, 496.0" style="fill:#000000;fill-opacity:1.0;"/>
	
	<line x1="538.0" y1="501.5" x2="1040.5" y2="501.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;" stroke-dasharray="5.0, 3.0"/>
</g>
<g id="Signal line" class="SignalLineView">
	<path d="M 502.0,541.0 L 512.0,546.5 L 502.0,551.0 L 502.0, 541.0" style="fill:#000000;fill-opacity:1.0;"/>
	
	<line x1="131.0" y1="546.5" x2="502.0" y2="546.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Signal line" class="SignalLineView">
	<path d="M 1456.5,586.0 L 1466.5,591.5 L 1456.5,596.0 L 1456.5, 586.0" style="fill:#000000;fill-opacity:1.0;"/>
	
	<line x1="528.0" y1="591.5" x2="1456.5" y2="591.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Signal line" class="SignalLineView">
	<path d="M 1492.5,629.0 L 1482.0,633.5 L 1492.5,639.0 L 1492.5,629.0" style="fill:#000000;fill-opacity:1.0;"/>
	<line x1="1483.0" y1="611.5" x2="1522.0" y2="611.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;"/>
	<line x1="1522.0" y1="633.5" x2="1492.5" y2="633.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;"/>
	<path d="M 1522.0,611.5 Q 1532.0,611.5 1532.0, 621.5 L 1532.0 623.5 Q 1532.0,633.5 1522.0,633.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Signal line" class="SignalLineView">
	<path d="M 538.0,674.0 L 528.0,679.5 L 538.0,684.0 L 538.0, 674.0" style="fill:#000000;fill-opacity:1.0;"/>
	
	<line x1="538.0" y1="679.5" x2="1466.5" y2="679.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;" stroke-dasharray="5.0, 3.0"/>
</g>
<g id="Signal line" class="SignalLineView">
	<path d="M 1030.5,719.0 L 1040.5,724.5 L 1030.5,729.0 L 1030.5, 719.0" style="fill:#000000;fill-opacity:1.0;"/>
	
	<line x1="528.0" y1="724.5" x2="1030.5" y2="724.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Signal line" class="SignalLineView">
	<path d="M 1456.5,764.0 L 1466.5,769.5 L 1456.5,774.0 L 1456.5, 764.0" style="fill:#000000;fill-opacity:1.0;"/>
	
	<line x1="1056.5" y1="769.5" x2="1456.5" y2="769.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;"/>
</g>
<g id="Signal line" class="SignalLineView">
	<path d="M 1066.5,809.0 L 1056.5,814.5 L 1066.5,819.0 L 1066.5, 809.0" style="fill:#000000;fill-opacity:1.0;"/>
	
	<line x1="1066.5" y1="814.5" x2="1466.5" y2="814.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;" stroke-dasharray="5.0, 3.0"/>
</g>
<g id="Signal line" class="SignalLineView">
	<path d="M 538.0,854.0 L 528.0,859.5 L 538.0,864.0 L 538.0, 854.0" style="fill:#000000;fill-opacity:1.0;"/>
	
	<line x1="538.0" y1="859.5" x2="1040.5" y2="859.5" style="fill:none;stroke:#979797;stroke-opacity:1.0;stroke-width:1.0;" stroke-dasharray="5.0, 3.0"/>
</g>

<!-- Generator: Sequence Diagram - v1.8.11-(198) - http://www.macsequencediagram.com -->

</svg>
